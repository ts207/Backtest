# Gap Matrix: `report_requirements.md` vs current repo

| Requirement | Status (met/partial/missing) | Evidence (file path + line range) | Notes/Risks | Proposed change | How to verify |
|---|---|---|---|---|---|
| R1. Define the trading game contract | partial | Interface: `project/pipelines/run_all.py:66-70`, `project/pipelines/run_all.py:118-120`, `project/pipelines/_lib/run_manifest.py:22-40`, `project/pipelines/_lib/run_manifest.py:54-58`<br>Behavior: `tests/test_run_all_phase2.py:260-287` | Run contract currently covers run/window/symbols and strategy requirement, but does not encode venue/instrument constraints like leverage/borrow/custody as first-class required fields. | N/A (analysis-only per instruction) | `./.venv/bin/python -m pytest -q tests/test_run_all_phase2.py` |
| R2. Enforce data audit and provenance gates | partial | Interface: `project/pipelines/clean/build_cleaned_15m.py:164-170`, `project/pipelines/clean/build_cleaned_15m.py:199-225`, `project/pipelines/clean/build_cleaned_15m.py:339-358`, `project/pipelines/ingest/ingest_binance_um_funding.py:97-103`, `project/pipelines/ingest/ingest_binance_um_funding.py:496-514`<br>Behavior: `tests/test_sanity.py:61-85`, `tests/test_ingest_funding_api_persistence.py:71-94`, `tests/test_ingest_ohlcv_header_row.py:16-34` | Strong timestamp/schema sanity checks exist, but no dedicated schema version/hash audit artifact and no explicit centralized pre-backtest audit gate. | N/A (analysis-only per instruction) | `./.venv/bin/python -m pytest -q tests/test_sanity.py tests/test_ingest_funding_api_persistence.py tests/test_ingest_ohlcv_header_row.py` |
| R3. Implement mechanism-grounded feature sets | partial | Interface: `project/pipelines/features/build_features_v1.py:134-142`, `project/pipelines/features/build_market_context.py:68-80`, `project/pipelines/ingest/ingest_binance_um_open_interest_hist.py:331-353`, `project/pipelines/run_all.py:199-239`<br>Behavior: `tests/test_build_market_context.py:43-81`, `tests/test_run_all_hypothesis_generator.py:119-152`, `tests/test_ingest_open_interest_hist.py:35-69` | Funding/volatility/compression features are present and OI/liquidation ingestion is optional, but revision-lag controls and first-class basis/on-chain integration are not in the main `features_v1` path. | N/A (analysis-only per instruction) | `./.venv/bin/python -m pytest -q tests/test_build_market_context.py tests/test_run_all_hypothesis_generator.py tests/test_ingest_open_interest_hist.py` |
| R4. Model transaction costs and execution frictions | partial | Interface: `project/pipelines/backtest/backtest_strategies.py:228-257`, `project/engine/pnl.py:13-23`, `project/pipelines/backtest/backtest_strategies.py:402-444`<br>Behavior: `tests/test_run_all_phase2.py:179-229` | Cost model is a single turnover-based `cost_bps`; no explicit maker/taker fill model, venue-tier routing logic, or impact decomposition into separate fee/slippage/impact components. | N/A (analysis-only per instruction) | `./.venv/bin/python -m pytest -q tests/test_run_all_phase2.py` |
| R5. Support deterministic and reproducible backtest runs | partial | Interface: `project/pipelines/_lib/run_manifest.py:22-40`, `project/pipelines/_lib/run_manifest.py:43-58`, `project/pipelines/research/phase2_conditional_hypotheses.py:836-849`<br>Behavior: `tests/test_phase2_conditional_hypotheses.py:92-129` | Manifests and configurable seeds exist, but no enforced deterministic seed contract across full pipeline/backtest, and no config digest/code revision/data snapshot ID checks for reproducibility assertions. | N/A (analysis-only per instruction) | `./.venv/bin/python -m pytest -q tests/test_phase2_conditional_hypotheses.py` |
| R6. Use time-respecting validation | partial | Interface: `project/pipelines/research/analyze_conditional_expectancy.py:187-205`, `project/pipelines/research/validate_expectancy_traps.py:203-224`, `project/pipelines/research/validate_expectancy_traps.py:544-560`<br>Behavior: `tests/test_validate_expectancy_traps.py:12-34` | Forward-horizon/event-based validation and leakage checks exist, but no explicit walk-forward train/validation/test split framework in strategy evaluation/backtest promotion. | N/A (analysis-only per instruction) | `./.venv/bin/python -m pytest -q tests/test_validate_expectancy_traps.py` |
| R7. Apply multiplicity and data-snooping controls | missing | Interface (closest): `project/pipelines/research/analyze_conditional_expectancy.py:283-287`, `project/pipelines/research/phase2_conditional_hypotheses.py:1032-1036`<br>Behavior (closest): `tests/test_phase2_conditional_hypotheses.py:92-129` | Thresholding and gate counts exist, but no explicit multiple-testing correction (for example adjusted p-values/reality-check style controls) or selection-bias adjustment artifact. | N/A (analysis-only per instruction) | `./.venv/bin/python -m pytest -q tests/test_phase2_conditional_hypotheses.py` |
| R8. Run robustness and adversarial stress suite | partial | Interface: `project/pipelines/research/validate_expectancy_traps.py:439-560`, `project/pipelines/research/validate_expectancy_traps.py:581-586`, `project/pipelines/backtest/backtest_strategies.py:402-444`<br>Behavior: `tests/test_validate_expectancy_traps.py:12-34`, `tests/test_phase2_conditional_hypotheses.py:131-224` | Robustness exists for overlap/leakage/regime/tail/symmetry and fee sensitivity, but delay-injection/outage-style adversarial execution scenarios are not represented as a complete mandatory suite. | N/A (analysis-only per instruction) | `./.venv/bin/python -m pytest -q tests/test_validate_expectancy_traps.py tests/test_phase2_conditional_hypotheses.py` |
| R9. Deliver budget-first edge pipeline | partial | Interface: `README.md:49-57`, `docs/discovery_pipeline.md:12-19`, `project/pipelines/run_all.py:356-479`<br>Behavior: `tests/test_run_all_phase2.py:89-147`, `tests/test_run_all_hypothesis_generator.py:10-84` | Discovery sequencing is documented and configurable, but no enforced default policy that prioritizes carry/basis first and defers microstructure/MEV phases through explicit promotion prerequisites. | N/A (analysis-only per instruction) | `./.venv/bin/python -m pytest -q tests/test_run_all_phase2.py tests/test_run_all_hypothesis_generator.py` |
| R10. Add strategy templates from case studies | partial | Interface: `project/pipelines/research/build_strategy_candidates.py:22-32`, `project/pipelines/alpha_bundle/build_onchain_flow_signal.py:52-63`, `project/pipelines/alpha_bundle/build_alpha_signals_v2.py:154-238`, `project/strategies/registry.py:1-52`<br>Behavior: `tests/test_build_strategy_candidates.py:60-90`, `tests/test_strategy_adapters.py:38-56` | Template/adapters exist for several event families plus on-chain/orderflow proxies; explicit funding carry delta-neutral and MEV-risk filter strategy templates are not present as runnable backtest strategies. | N/A (analysis-only per instruction) | `./.venv/bin/python -m pytest -q tests/test_build_strategy_candidates.py tests/test_strategy_adapters.py` |
| R11. Enforce risk sizing and portfolio caps | partial | Interface: `project/strategies/vol_compression_v1.py:52-66`, `project/strategies/vol_compression_v1.py:109-187`, `project/pipelines/backtest/backtest_strategies.py:29-43`, `project/pipelines/backtest/backtest_strategies.py:367-385`, `project/strategies/overlay_registry.py:67-91`<br>Behavior: `tests/test_phase2_conditional_hypotheses.py:177-224` | Stop/target/time exits and drawdown reporting exist, plus overlay-schema risk fields, but portfolio-level leverage/liquidity caps and deterministic breach-handling controls are not enforced in runtime execution. | N/A (analysis-only per instruction) | `./.venv/bin/python -m pytest -q tests/test_phase2_conditional_hypotheses.py` |
| R12. Provide deployment gates and live monitoring hooks | partial | Interface: `project/pipelines/research/generate_recommendations_checklist.py:77-153`, `project/pipelines/research/generate_recommendations_checklist.py:212-223`, `project/pipelines/report/make_report.py:332-373`, `project/pipelines/run_all.py:471-478`<br>Behavior: `tests/test_generate_recommendations_checklist.py:11-123`, `tests/test_run_all_phase2.py:34-45` | Run-scoped go/no-go checklist and report diagnostics are present, but live paper/production parity checks and continuous feed/fill/cost/risk drift monitors are report-oriented rather than full deployment gate enforcement. | N/A (analysis-only per instruction) | `./.venv/bin/python -m pytest -q tests/test_generate_recommendations_checklist.py tests/test_run_all_phase2.py` |

